# Satin-Bower

## Code in progress.

### This repo contains all the necessary indicators and the  functions they need to be run.

### Procedure to use this Repository

1. Download or clone this repository on your device

2. Download and install this wheel file from  Utilities repository

```bash
  pip install QuantBinary-Utilities-0.0.2-py3-none-any.whl
  
```
3.  Download and install this wheel file from  Utilities satin-bower inside the dist folder


```bash
  pip install dist/Satin_Bower-0.0.9-py3-none-any.whl
  
```



#### Alternatively here are the steps to build a wheel file

1. Open the same satin-bower repo in a new window of PyCharm

2. create a new python file named __init__.py inside every directory as shown in the figure below 

![3CE8AA88-CB3A-4277-B9E2-F5A14FC63F4D_1_201_a.jpeg](Backtesting%2FImages%2F3CE8AA88-CB3A-4277-B9E2-F5A14FC63F4D_1_201_a.jpeg)
![97BDB764-7B48-47DB-81F6-40BA974C8CDF_1_201_a.jpeg](Backtesting%2FImages%2F97BDB764-7B48-47DB-81F6-40BA974C8CDF_1_201_a.jpeg)

3. Create a new python file named setup.py inside the satin-bower package

```bash
from setuptools import setup, find_packages

setup(
    name='Satin_Bower',
    version='0.0.9',
    description='A collection of Indicators and Backtesting functions.',
    author=['Rahul Sawant', 'Maroof Akhtar'],
    author_email='off2rahul@gmail.com',
    packages=find_packages(),
)
  
```
Upgrade the version every time you change something major inside the repo

4. Run the command below inside your terminal, it will create a new wheel file inside the dist folder.

```bash
  python setup.py bdist_wheel 
  
```
   now if you want to run backtest in the satin-bower repo just copy this wheel file from the dist folder and paste it the same way we did in the step 2 of using the repo.


#### End of steps to build a wheel file

5. Now you can run the results file of each flavour of backtest to run the backtest, also you can change the values with which you want to run your backtest.

```bash
  python path/to/your/file.py
  
```






## Backtesting Results of Indicators
### This Directory Includes the Backtesting of different indicators along with different flavours of backtesting

#### Every general framework of backtesting will follow these methods

| Performance        | Output                                                                                                                                                                                           | 
|:-------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| 
| `Hit Ratio`        | `It is simply the number of winning trades over the number of the trades taken in total`                                                                                                         |
| `Expectancy`       | `The expectancy is a measure of the average amount gained or lost per trade`                                                                                                                     |
| `Minimum Drawdown` | `The minimum drawdown measures the largest percentage decrease in the account value from a peak to a subsequent trough`                                                                          |
| `Maximum Drawdown` | `The maximum drawdown measures the largest percentage decrease in the account value from a peak to the next trough over the entire backtest period`                                              |
| `Net Profit`       | `The net profit represents the overall profit or loss from all trades`                                                                                                                           |
| `Trades`           | `No of successfull Trades `                                                                                                                                                                      |
| `Sharpe Ratio`     | `This can be verbalized as "for every unit of reward, how much risk am I taking on?" or put another way, "what is my reward to risk ratio", or another way, "Am I being rewarded for my risk?" ` |

![5F612E29-1CB2-4031-BC2D-0D2970387407_4_5005_c.jpeg](Backtesting%2FImages%2F5F612E29-1CB2-4031-BC2D-0D2970387407_4_5005_c.jpeg)
#### Signal Chart:
A signal chart refers to a graphical representation of the trading signals generated by the strategy during the backtest. It visually displays the 
entry and exit points for each trade based on the specified trading strategy or indicator.

#### Note:
No one Performance metric can tell you whether or not a stock is a good buy or not, nor can one Performance metric tell you if your model is good or bad.


## Backtesting Supertrend
### The strategy that relies on the SuperTrend uses the following conditions:

SuperTrend indicator is a trend-following technique used to detect the changes in the marketâ€™s dynamics.

We usually use the basic flip strategy to generate trades. The following are the
trading rules used as trading triggers:

**Buy Signal:** A long position(Buy) may be opened whenever the market turns above the
SuperTrend indicator.

**Sell Signal:** A short position(Sell) may be opened whenever the market turns below the
SuperTrend indicator.

##  Forex Data Backtesting
### 1) Backtesting MACD using FOREX EUR/USD Data
| Performance        | Output                   | 
|:-------------------|:-------------------------| 
| `Hit Ratio`        | `0.0`                    |
| `Expectancy`       | `1.25`                   |
| `Minimum Drawdown` | `-0.0008600000000000829` |
| `Maximum Drawdown` | `0.0006099999999999994`  |
| `Net Profit`       | `10.0`                   |
| `Trades`           | `7`                      |
| `Sharpe Ratio`     | `0.0888118846342774`    |

### 2) Backtesting Chaikin using FOREX EUR/USD Data
| Performance        | Output                    | 
|:-------------------|:--------------------------| 
| `Hit Ratio`        | `0.0`                     |
| `Expectancy`       | `2.222222222222222`       |
| `Minimum Drawdown` | `-0.00017000000000000348` |
| `Maximum Drawdown` | `0.00045000000000006146`  |
| `Net Profit`       | `59.99999999999999`       |
| `Trades`           | `26`                      |
| `Sharpe Ratio`     | `0.09286389335355881`     |

### 2) Backtesting Ichimoku Clouds using FOREX EUR/USD Data
| Performance        | Output                 | 
|:-------------------|:-----------------------| 
| `Hit Ratio`        | `0.0`                  |
| `Expectancy`       | `5.0`                  |
| `Minimum Drawdown` | `0.000180000000000069` |
| `Maximum Drawdown` | `0.000180000000000069` |
| `Net Profit`       | `10.0`                 |
| `Trades`           | `1`                    |
| `Sharpe Ratio`     | `0.06267921864968436`  |


### 0) Backtesting Ichimoku Clounds Indicator
### 1) backtesting_supertrend

#### i) AAPL intraday timeframe= 1 Minute

![aapl_s_bs.png](Backtesting%2Fbacktesting_of_supertrend_indicator%2Fbacktest_supertrend%2Faapl_s_bs.png)

| Performance        | Output                                   | 
|:-------------------|:-----------------------------------------| 
| `Hit Ratio`        | `33.33333333333333`                      |
| `Expectancy`       | `85.55555555555556`                     |
| `Minimum Drawdown` | `-0.060000000000002274`                    |
| `Maximum Drawdown` | `0.539999999999992`                     |
| `Net Profit`       | `770.0`                                 |
| `Trades`           | `9`                                      |
| `Sharpe Ratio`     | `1.2167387820363387`                     |

In the above case of AAPL stock, we can see that the algorithm exhibits a moderate hit ratio and expectancy, indicating some level of profitability per trade. Though no of trades is less because of Lagging nature of Supertrend Indicator, as it appears after the occurrence of a certain price movement if the price variation is frequent.

#### ii) TSLA intraday timeframe= 1 Minute

![tsla_bs_s.png](Backtesting%2Fbacktesting_of_supertrend_indicator%2Fbacktest_supertrend%2Ftsla_bs_s.png)

| Performance        | Output                                   | 
|:-------------------|:-----------------------------------------| 
| `Hit Ratio`        | `55.55555555555556`                      |
| `Expectancy`       | `-78.88888888888889`                     |
| `Minimum Drawdown` | `-3.0900000000000034`                    |
| `Maximum Drawdown` | `1.4099999999999966`                     |
| `Net Profit`       | `-710.0`                                 |
| `Trades`           | `9`                                      |
| `Sharpe Ratio`     | `0.8364702976994652`                     |

In the above case of TSLA stock, we can see despite of having a good hit ratio we are getting a negative net profit this is because of one buy signal which is generated at the high price, result in the maximum drawdown to become relatively high. he negative net profit further confirms the overall loss generated by the algorithm. The lower Sharpe ratio suggests a less favorable risk-adjusted performance.

#### iii) AMZN intraday timeframe= 1 Minute

![amzn_s_bs.png](Backtesting%2Fbacktesting_of_supertrend_indicator%2Fbacktest_supertrend%2Famzn_s_bs.png)

| Performance        | Output                | 
|:-------------------|:----------------------| 
| `Hit Ratio`        | `16.666666666666664`  |
| `Expectancy`       | `215.83333333333334`  |
| `Minimum Drawdown` | `-0.3901000000000039` |
| `Maximum Drawdown` | `1.0999999999999943`  |
| `Net Profit`       | `2590.0`              |
| `Trades`           | `12`                  |
| `Sharpe Ratio`     | `1.3207845396513769`  |


### 2) backtest_supertrend_with_mcginley

#### i) AAPL intraday timeframe= 1 Minute

![aapl_mda_s.png](Backtesting%2Fbacktesting_of_supertrend_indicator%2Fbacktest_supertrend_with_mcginley%2Faapl_mda_s.png)

| Performance        | Output                  | 
|:-------------------|:------------------------| 
| `Hit Ratio`        | `25`                    |
| `Expectancy`       | `71.24999999999999`     |
| `Minimum Drawdown` | `-0.060000000000002274` |
| `Maximum Drawdown` | `0.539999999999992`     |
| `Net Profit`       | `569.9999999999999`     |
| `Trades`           | `8`                     |
| `Sharpe Ratio`     | `1.1296159887284045`    |

In the above case of AAPL stock, we can see that the algorithm exhibits a moderate hit ratio and expectancy, indicating some level of profitability per trade. Though no of trades is less because of Lagging nature of Supertrend Indicator, as it appears after the occurrence of a certain price movement if the price variation is frequent.

#### ii) TSLA intraday timeframe= 1 Minute

![tsla_mda_s.png](Backtesting%2Fbacktesting_of_supertrend_indicator%2Fbacktest_supertrend_with_mcginley%2Ftsla_mda_s.png)

| Performance        | Output                                   | 
|:-------------------|:-----------------------------------------| 
| `Hit Ratio`        | `55.55555555555556`                      |
| `Expectancy`       | `-68.88888888888889`                     |
| `Minimum Drawdown` | `-3.0900000000000034`                    |
| `Maximum Drawdown` | ` 1.4099999999999966`                     |
| `Net Profit`       | `-620.0`                                 |
| `Trades`           | `9`                                      |
| `Sharpe Ratio`     | `0.8416099127540132`                     |


In the above case of TSLA stock the results are same as of the above case. The maximum drawdown is relatively high, suggesting potential substantial losses. The negative net profit further confirms the overall loss generated by the algorithm. The lower Sharpe ratio indicates a less favorable risk-adjusted performance.


#### iii) AMZN intraday timeframe= 1 Minute

![amzn_mda_s.png](Backtesting%2Fbacktesting_of_supertrend_indicator%2Fbacktest_supertrend_with_mcginley%2Famzn_mda_s.png)

| Performance        | Output                | 
|:-------------------|:----------------------| 
| `Hit Ratio`        | `16.666666666666664`  |
| `Expectancy`       | `195.83333333333334`  |
| `Minimum Drawdown` | `-0.6886999999999972` |
| `Maximum Drawdown` | `1.0999999999999943`  |
| `Net Profit`       | `2350.0`              |
| `Trades`           | `12`                  |
| `Sharpe Ratio`     | `1.3188730896583514`  |



### 3) backtest_supertrend_with_ema_and_mcginley

#### i) AAPL intraday timeframe= 1 Minute

![aapl_ema_mda_s.png](Backtesting%2Fbacktesting_of_supertrend_indicator%2Fbacktest_supertrend_with_ema_and_mcginley%2Faapl_ema_mda_s.png)

| Performance        | Output                  | 
|:-------------------|:------------------------| 
| `Hit Ratio`        | `25`                    |
| `Expectancy`       | `71.24999999999999`     |
| `Minimum Drawdown` | `-0.060000000000002274` |
| `Maximum Drawdown` | `0.539999999999992`     |
| `Net Profit`       | `569.9999999999999`     |
| `Trades`           | `8`                     |
| `Sharpe Ratio`     | `1.1296159887284045`    |

In the above case of AAPL stock, we can see that the algorithm exhibits a moderate hit ratio and expectancy, indicating some level of profitability per trade. Though no of trades is less because of Lagging nature of Supertrend Indicator, as it appears after the occurrence of a certain price movement if the price variation is frequent.


#### ii) TSLA intraday timeframe= 1 Minute

![tsla_ema_mda_s.png](Backtesting%2Fbacktesting_of_supertrend_indicator%2Fbacktest_supertrend_with_ema_and_mcginley%2Ftsla_ema_mda_s.png)

| Performance        | Output                                   | 
|:-------------------|:-----------------------------------------| 
| `Hit Ratio`        | `55.55555555555556`                      |
| `Expectancy`       | `-68.88888888888889`                     |
| `Minimum Drawdown` | `-3.0900000000000034`                    |
| `Maximum Drawdown` | ` 1.4099999999999966`                     |
| `Net Profit`       | `-620.0`                                 |
| `Trades`           | `9`                                      |
| `Sharpe Ratio`     | `0.8416099127540132`                     |

In the above case of TSLA stock the results are same as of the above case. The maximum drawdown is relatively high, suggesting potential substantial losses. The negative net profit further confirms the overall loss generated by the algorithm. The lower Sharpe ratio indicates a less favorable risk-adjusted performance.

#### iii) AMZN intraday timeframe= 1 Minute

![amzn_ema_mda_s.png](Backtesting%2Fbacktesting_of_supertrend_indicator%2Fbacktest_supertrend_with_ema_and_mcginley%2Famzn_ema_mda_s.png)


| Performance        | Output                | 
|:-------------------|:----------------------| 
| `Hit Ratio`        | `16.666666666666664`  |
| `Expectancy`       | ` 195.83333333333334` |
| `Minimum Drawdown` | `-0.6886999999999972` |
| `Maximum Drawdown` | ` 1.0999999999999943` |
| `Net Profit`       | ` 2350.0`             |
| `Trades`           | `12`                  |
| `Sharpe Ratio`     | `1.3188730896583514`  |


### 4) backtesting_supertrend_with_triple_bullish_trend 

#### i) AAPL intraday timeframe= 1 Minute

![aapl_tbt_s.png](Backtesting%2Fbacktesting_of_supertrend_indicator%2Fbacktest_supertrend_with_triple_bullish_trend%2Faapl_tbt_s.png)

| Performance        | Output                  | 
|:-------------------|:------------------------| 
| `Hit Ratio`        | `42.857142857142854`    |
| `Expectancy`       | `108.57142857142857`    |
| `Minimum Drawdown` | `-0.060000000000002274` |
| `Maximum Drawdown` | ` 0.5999999999999943`   |
| `Net Profit`       | `760.0`                 |
| `Trades`           | `7`                     |
| `Sharpe Ratio`     | `1.0756609285131644`    |

In above case of AAPL stock, the algorithm appears to have a moderate hit ratio and expectancy, indicating some level of profitability per trade. The Sharpe ratio above 1 suggests a relatively favorable risk-adjusted performance


#### ii) TSLA intraday timeframe = 1 Minute 

![tsla_tbt_s.png](Backtesting%2Fbacktesting_of_supertrend_indicator%2Fbacktest_supertrend_with_triple_bullish_trend%2Ftsla_tbt_s.png)

| Performance | Output                 | 
|:------------|:-----------------------| 
| `Hit Ratio`   | `44.44444444444444`    |
| `Expectancy`   | `-90.00000000000001`   |
| `Minimum Drawdown`   | ` -3.7501000000000033` |
| `Maximum Drawdown`   | `1.25`                 |
| `Net Profit`   | `-810.0000000000001`   |
| `Trades`   | `0.8373193461691496`   |
| `Sharpe Ratio`     | `1.4188730896583514`   |

In above case of TSLA stock, the higher hit ratio comes at the expense of lower ROI and expectancy, you can achieve a higher hit ratio by minimising the stop loss.

#### iii) AMZN intraday timeframe= 1 Minute

![amzn_tbt_s.png](Backtesting%2Fbacktesting_of_supertrend_indicator%2Fbacktest_supertrend_with_triple_bullish_trend%2Famzn_tbt_s.png)

| Performance        | Output                | 
|:-------------------|:----------------------| 
| `Hit Ratio`        | `20.0`                |
| `Expectancy`       | ` 191.99999999999997` |
| `Minimum Drawdown` | ` -0.966399999999993` |
| `Maximum Drawdown` | `1.0999999999999943`  |
| `Net Profit`       | `1919.9999999999998`  |
| `Trades`           | `10`                  |
| `Sharpe Ratio`     | ` 1.2022795761498302`  |



### 5) backtesting_supertrend_with_triple_bullish_trend_with_ema

#### i) AAPL intraday timeframe= 1 Minute

![apl_ema_tbt_s.png](Backtesting%2Fbacktesting_of_supertrend_indicator%2Fbacktest_supertrend_with_triple_bullish_and_ema%2Fapl_ema_tbt_s.png)

| Performance        | Output                  | 
|:-------------------|:------------------------| 
| `Hit Ratio`        | `43.75`                 |
| `Expectancy`       | `46.25`                 |
| `Minimum Drawdown` | `-0.060000000000002274` |
| `Maximum Drawdown` | `0.3299999999999841`    |
| `Net Profit`       | `740.0`                 |
| `Trades`           | `16`                    |
| `Sharpe Ratio`     | `1.5994049289220764`    |

In above case of AAPL stock, the algorithm appears to have a hit ratio grater than the previous one and less expectancy with high number of trades which is resulting in positive net profit,The Sharpe ratio above 1 suggests a relatively favorable risk-adjusted performance


#### ii) TSLA intraday timeframe = 1 Minute 

![tsla_ema_tbt_s.png](Backtesting%2Fbacktesting_of_supertrend_indicator%2Fbacktest_supertrend_with_triple_bullish_and_ema%2Ftsla_ema_tbt_s.png)

| Performance        | Output                | 
|:-------------------|:----------------------| 
| `Hit Ratio`        | `25.925925925925924`  |
| `Expectancy`       | `9.25925925925926`    |
| `Minimum Drawdown` | ` -2.478499999999997` |
| `Maximum Drawdown` | `0.47999999999998977` |
| `Net Profit`       | `250.0`               |
| `Trades`           | `27`                  |
| `Sharpe Ratio`     | ` 1.610538976378057`    |

In the above case of TSLA stock, we can see that there is a very low expectancy with high no of trades which has resulted in positive net Profit and a good sharpe ratio. However it is still not promising outcome since we have a high minimum drawdown of -2.5%. This flavour is different from the above four with respect to supertrend because supertrend is s lagging indicator and ema helps weaken the lagging nature by giving higher weights to the neighbourhood points.


#### iii) AMZN intraday timeframe= 1 Minute

![amzn_ema_tbt_s.png](Backtesting%2Fbacktesting_of_supertrend_indicator%2Fbacktest_supertrend_with_triple_bullish_and_ema%2Famzn_ema_tbt_s.png)

| Performance        | Output                 | 
|:-------------------|:-----------------------| 
| `Hit Ratio`        | `11.76470588235294`    |
| `Expectancy`       | `74.11764705882354`    |
| `Minimum Drawdown` | ` -0.8697999999999979` |
| `Maximum Drawdown` | `1.0999999999999943`   |
| `Net Profit`       | `1260.0`               |
| `Trades`           | `17`                   |
| `Sharpe Ratio`     | ` 1.610538976378057`   |

### Conclusion:
The SuperTrend is a great tool to follow the trend and to determine
the market regime, Supertrend is considered as a lagging indicator because it works on the principal of Average True Range(ATR) which is a lagging indicator itself. It gives some insights as to
where volatility is right now. Generally, since in periods of panic and price depreciation we see volatility go
up, the ATR will most likely trend higher during these periods, similarly in
times of steady uptrends or downtrends, the ATR will tend to go lower. One
should always remember that Supertrend indicator is lagging and therefore must be
used with extreme caution.



## Backtesting Bollinger Bands
### The strategy that relies on the Bollinger Bands uses the following conditions:

**Buy Signal:** A long signal is generated whenever the market price closes below the
lower band.

**Sell Signal:** A short signal is generated whenever the market price closes above
the upper band.

### 1) backtesting_bollinger_bands

#### i) GOOG intraday timeframe= 1 Minute

![goog_bb_bb.png](Backtesting%2Fbacktesting_of_bollinger_bands_indicator%2Fbacktest_bollinger_bands%2Fgoog_bb_bb.png)

| Performance        | Output                | 
|:-------------------|:----------------------| 
| `Hit Ratio`        | `12.5`                |
| `Expectancy`       | `180.6253`            |
| `Minimum Drawdown` | `-0.3400000000000034` |
| `Maximum Drawdown` | `0.8799999999999955`  |
| `Net Profit`       | `2890.0`              |
| `Trades`           | `16`                  |
| `Sharpe Ratio`     | `0.90139943960629`    |


#### ii) TSLA intraday timeframe= 1 Minute

![tsla_bb_bb.png](Backtesting%2Fbacktesting_of_bollinger_bands_indicator%2Fbacktest_bollinger_bands%2Ftsla_bb_bb.png)

| Performance        | Output                | 
|:-------------------|:----------------------| 
| `Hit Ratio`        | `14.285714285714285`  |
| `Expectancy`       | `190.00000000000003`  |
| `Minimum Drawdown` | `-1.1550000000000011` |
| `Maximum Drawdown` | `1.9310999999999865`  |
| `Net Profit`       | `3990.0000000000005`  |
| `Trades`           | `21`                  |
| `Sharpe Ratio`     | `0.6566128988877104`  |


In above case of GOOG and TSLA stock we have got a relatively low hit ratio but an acceptable Expectancy and Drawdown. Also,  we can see that sharpe ratio of GOOG is better than the TSLA one this is because the Bollinger Band Indicator is good at Ranging Market(Which is GOOG in this case) and that not so good at Trending market( Which is TSLA here). More on Trending and Ranging Market in the Conclusion Section below.

### 2) backtesting_bollinger_bands_with_mcginley

#### i) GOOG intraday timeframe= 1 Minute

![goog_bb_mda.png](Backtesting%2Fbacktesting_of_bollinger_bands_indicator%2Fbacktest_bollinger_bands_with_mcginley%2Fgoog_bb_mda.png)

| Performance        | Output                | 
|:-------------------|:----------------------| 
| `Hit Ratio`        | `8.0`                 |
| `Expectancy`       | `60.4`                |
| `Minimum Drawdown` | `-0.3649999999999949` |
| `Maximum Drawdown` | `0.8099999999999881`  |
| `Net Profit`       | `1510.0`              |
| `Trades`           | `25`                  |
| `Sharpe Ratio`     | `1.2448853716116637`  |


#### ii) TSLA intraday timeframe= 1 Minute

![tsla_bb_mda.png](Backtesting%2Fbacktesting_of_bollinger_bands_indicator%2Fbacktest_bollinger_bands_with_mcginley%2Ftsla_bb_mda.png)

| Performance        | Output                | 
|:-------------------|:----------------------| 
| `Hit Ratio`        | `9.75609756097561`    |
| `Expectancy`       | `102.4390243902439`   |
| `Minimum Drawdown` | `-2.5200000000000102` |
| `Maximum Drawdown` | `1.5200000000000102`  |
| `Net Profit`       | `4200.0`              |
| `Trades`           | `41`                  |
| `Sharpe Ratio`     | `0.48659372654355026`   |

In the above case of GOOG and TSLA stock we can see that there is a decrease in the expectancy but improvement in the sharpe ratio. That decrease in expectancy is mainly because there is a increase in number of trades. 

### 3) backtest_bollinger_bands_with_ema_and_mcginley

#### i) GOOG intraday timeframe= 1 Minute


![goog_bb_mda&ema.png](Backtesting%2Fbacktesting_of_bollinger_bands_indicator%2Fbacktest_bollinger_bands_with_ema_and_mcginley%2Fgoog_bb_mda%26ema.png)

| Performance        | Output                            | 
|:-------------------|:----------------------------------| 
| `Hit Ratio`        | `9.523809523809524`               |
| `Expectancy`       | `71.42857142857143`               |
| `Minimum Drawdown` | `-0.3649999999999949`             |
| `Maximum Drawdown` | `0.8099999999999881`              |
| `Net Profit`       | `1500.0`                          |
| `Trades`           | `21`                              |
| `Sharpe Ratio`     | `1.330142353941403`              |


#### ii) TSLA intraday timeframe= 1 Minute

![tsla_bb_mda&ema.png](Backtesting%2Fbacktesting_of_bollinger_bands_indicator%2Fbacktest_bollinger_bands_with_ema_and_mcginley%2Ftsla_bb_mda%26ema.png)

| Performance        | Output                | 
|:-------------------|:----------------------| 
| `Hit Ratio`        | `9.75609756097561`    |
| `Expectancy`       | `94.39024390243902`   |
| `Minimum Drawdown` | `-2.5200000000000102` |
| `Maximum Drawdown` | `1.5200000000000102`  |
| `Net Profit`       | `3870.0`              |
| `Trades`           | `41`                  |
| `Sharpe Ratio`     | `0.611859830582148`  |

In the above GOOG and TSLA we can see similar results as that of only bollinger_bands_with_mcginley but a slight increase in the sharpe ratio 

### 4) backtesting_bollinger_bands_with_triple_bullish_trend 

#### i) GOOG intraday timeframe= 1 Minute

![goog_bb_tbt.png](Backtesting%2Fbacktesting_of_bollinger_bands_indicator%2Fbacktest_bollinger_bands_with_triple_bullish_trend%2Fgoog_bb_tbt.png)

| Performance        | Output                | 
|:-------------------|:----------------------| 
| `Hit Ratio`        | `7.6923076923076925`  |
| `Expectancy`       | `204.6153846153846`   |
| `Minimum Drawdown` | `-0.1600000000000108` |
| `Maximum Drawdown` | `0.9299999999999926`  |
| `Net Profit`       | `2660.0`              |
| `Trades`           | `13`                  |
| `Sharpe Ratio`     | `0.817667056273107`  |

#### ii) TSLA intraday timeframe= 1 Minute

![tsla_bb_tbt.png](Backtesting%2Fbacktesting_of_bollinger_bands_indicator%2Fbacktest_bollinger_bands_with_triple_bullish_trend%2Ftsla_bb_tbt.png)

| Performance        | Output                | 
|:-------------------|:----------------------| 
| `Hit Ratio`        | `17.647058823529413`  |
| `Expectancy`       | `187.64705882352942`  |
| `Minimum Drawdown` | `-1.1903999999999826` |
| `Maximum Drawdown` | `1.9310999999999865`  |
| `Net Profit`       | `3190.0`              |
| `Trades`           | `17`                  |
| `Sharpe Ratio`     | `0.5237144267338361`  |

In the above GOOG and TSLA stock we can see that backtesting it with triple bullish trend has resulted in a increase in Maximum Drawdown and Decrease in the Minimum Drawdown and an increase in Expectancy however the sharpe ratio has decreased for both of them.

### 5) backtesting_bollinger_bands_with_triple_bullish_trend_with_ema

#### i) GOOG intraday timeframe= 1 Minute

![goog_bb_tbt&ema.png](Backtesting%2Fbacktesting_of_bollinger_bands_indicator%2Fbacktest_bollinger_bands_with_triple_bullish_trend_and_ema%2Fgoog_bb_tbt%26ema.png)


| Performance        | Output                | 
|:-------------------|:----------------------| 
| `Hit Ratio`        | `9.836065573770492`   |
| `Expectancy`       | `51.63934426229508`   |
| `Minimum Drawdown` | `-0.4299999999999926` |
| `Maximum Drawdown` | `0.8799999999999955`  |
| `Net Profit`       | `3150.0`              |
| `Trades`           | `61`                  |
| `Sharpe Ratio`     | `1.8558210962767845`    |

#### ii) TSLA intraday timeframe= 1 Minute

![tsla_bb_tbt&ema.png](Backtesting%2Fbacktesting_of_bollinger_bands_indicator%2Fbacktest_bollinger_bands_with_triple_bullish_trend_and_ema%2Ftsla_bb_tbt%26ema.png)

| Performance        | Output                | 
|:-------------------|:----------------------| 
| `Hit Ratio`        | `8.19672131147541`    |
| `Expectancy`       | `69.34426229508196`   |
| `Minimum Drawdown` | `-0.9913999999999987` |
| `Maximum Drawdown` | `1.3599999999999852`  |
| `Net Profit`       | `4230.0`              |
| `Trades`           | `61`                  |
| `Sharpe Ratio`     | `0.9837378872289861`    |


In the above GOOG and TSLA we can see that Ranging Market which is GOOG stock has improved its Sharpe ratio and returns but at the cost of decreasing expectancy and increase in no of trades

### Conclusion: 
#### It is recommended in a ranging market but highly discouraged in a trending market.

**Ranging Markets:**  A ranging market is a market where the currency pair prices move back and forth between a price range of a high price level and a low-price level. The highest price level is formed with a resistance line, whereas the lowest price level is formed with a support line.

**Trending Markets:**  In a trending market, the price is moving in a single direction, either up or down, but not sideways
Ranging Market: 

I have used two stock plots to explain this one is TSLA stock which is acting like a trending market, and then we have GOOG stock which is behaving like a Ranging market.

#### The technique has the following biases that impact its predictability:

â€¢ The odds are greatly in your favor if you use buy signals in a bullish
market and sell signals in a bearish market.

â€¢ The odds are in your favor if you use buy and sell signals in a ranging
market.

â€¢ The odds are against you if you use buy and sell signals in a trending
market with no trend filter.

â€¢ The odds are harshly against you if you use buy signals in a bearish
market and sell signals in a bullish market.




## Backtesting efma(enhanced_fibonacci_moving_average)
### The strategy that relies on the efma uses the following conditions:

**Buy Signal:** A long position may be opened whenever the market price enters the
800-period moving average zone from the above.

**Sell Signal:** A short position may be opened whenever the market price enters the
800-period moving average zone from the below.


#### i) EUR_USD intraday timeframe= 1 Minute

![EUR_USD.png](Backtesting%2Fbacktesting_of_efma_indicator%2FEUR_USD.png)


| Performance        | Output                   | 
|:-------------------|:-------------------------| 
| `Hit Ratio`        | `9.836065573770492`      |
| `Expectancy`       | `10.0`                   |
| `Minimum Drawdown` | `-0.000170000000000003`  |
| `Maximum Drawdown` | `0.0004399999999999959`  |
| `Net Profit`       | `90.0`                   |
| `Trades`           | `9`                      |
| `Sharpe Ratio`     | `1.5930591344434533`     |



#### ii) EUR_NZD intraday timeframe= 1 Minute

![EUR_NZD.png](Backtesting%2Fbacktesting_of_efma_indicator%2FEUR_NZD.png)


| Performance        | Output                   | 
|:-------------------|:-------------------------| 
| `Hit Ratio`        | `16.666666666666664`     |
| `Expectancy`       | ` 13.75`                 |
| `Minimum Drawdown` | `-0.0001500000000000945` |
| `Maximum Drawdown` | ` 0.0005299999999999194` |
| `Net Profit`       | `110.0`                  |
| `Trades`           | `8`                      |
| `Sharpe Ratio`     | `2.9038307434424278`      |



#### iii) EUR_JPY intraday timeframe= 1 Minute

![EUR_JPY.png](Backtesting%2Fbacktesting_of_efma_indicator%2FEUR_JPY.png)


| Performance        | Output                 | 
|:-------------------|:-----------------------| 
| `Hit Ratio`        | `16.666666666666664`   |
| `Expectancy`       | `-56.666666666666664`  |
| `Minimum Drawdown` | `-0.5180000000000007`  |
| `Maximum Drawdown` | `0.054000000000002046` |
| `Net Profit`       | `-340.0`               |
| `Trades`           | `6`                    |
| `Sharpe Ratio`     | `3.037003822431005 `   |



### Conclusion: 
#### It is recommended in a ranging market but highly discouraged in a trending market.


#### Main strength:
Acts extremely well as a dynamic support and resistance level.

Example

![grade4-exponential-moving-averages-break2.png](Backtesting%2FImages%2Fgrade4-exponential-moving-averages-break2.png)


#### Main weakness:
Terrible in choppy markets and a little slow to react.

Choppy Market Example
![dotdash_INV-final-Choppy-Market_Feb_2021-01-d1a35e704e4e49ed9a36456352dfd30a.jpg](Backtesting%2FImages%2Fdotdash_INV-final-Choppy-Market_Feb_2021-01-d1a35e704e4e49ed9a36456352dfd30a.jpg)



### References:
[1] Trading Algos - 5 Key Backtesting Metrics by Brandon Fan
https://blankly.finance/list-of-performance-metrics/

[2] Contrarian Trading Strategies in Python by SOFIEN KAABAR
https://drive.google.com/file/d/1uPf7SWCgPq62HYX4BsfQylL6XNTtpAnu/view?usp=sharing












